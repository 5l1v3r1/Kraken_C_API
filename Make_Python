
CC=gcc 

ERROR =y
DEBUG =y
TRACE =y

CFLAGS= -std=c1x -c -Wall -Wextra -Woverlength-strings -g -O0 -D_POSIX_C_SOURCE=200112L -D_GNU_SOURCE -I/usr/include/python3.5/



# PROGRAM DEBUG FUNCTIONS

ifeq ($(DEBUG),y)
  DEBFLAGS = -DAPI_DEBUG # "-O" is needed to expand inlines
  CFLAGS += $(DEBFLAGS)
endif

# PROGRAM TRACING FUNCTIONS

ifeq ($(TRACE),y)
  TRACEFLAGS = -DAPI_TRACE # "-O" is needed to expand inlines
  CFLAGS += $(TRACEFLAGS)

endif

# PROGRAM ERROR FUNCTIONS

ifeq ($(ERROR),y)
  ERRORLAGS = -DAPI_ERROR # "-O" is needed to expand inlines
  CFLAGS += $(ERRORLAGS)

endif

DEFINES= -DPASSWORD='"$(PASSWORD)"'
# LIBS muss im lezten Schritt angeh√§ngt werden
LIBS = -L/usr/local/lib -L/usr/lib -L/usr/lib/x86_64-linux-gnu -lm -lssl -lcrypto 
PASSWORD= '"Default"'

DEPS = 

OBJ = krakenmodule.o

all: pymod
	@echo "CFLAGS: $(CFLAGS)"
	@echo "Compiled with PASSWORD= $(PASSWORD)"

# PHONY !
pymod: $(OBJ)
	$(CC) $(OBJ) $(LIBS) -o $@ 


%.o: %.c $(DEPS)
	$(CC) $(DEFINES) $(CFLAGS) -c -o $@ $<




